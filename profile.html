<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Profile â€” MyApp</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="css/style.css">
	</head>
	<body>
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<div class="container">
				<a class="navbar-brand" href="index.html">MyApp</a>
					<div class="d-flex ms-auto">
						<a id="logoutBtn" class="btn btn-outline-danger me-2" href="#">Logout</a>
						<a id="loginBtn" class="btn btn-outline-primary" href="login.html">Login</a>
					</div>
			</div>
		</nav>

		<main class="container my-5">
			<div class="row justify-content-center">
				<div class="col-lg-8">
					<div class="card shadow-sm mb-4">
								<div class="card-body d-flex gap-3 align-items-center">
									<div id="avatar" class="avatar bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width:72px;height:72px;font-size:28px;">--</div>
									<div>
										<h5 id="displayFullname" class="mb-0">Guest</h5>
										<small id="displayUsername" class="text-muted">@guest</small>
									</div>
								</div>
					</div>

					<div id="notAuthed" class="card shadow-sm d-none">
						<div class="card-body text-center">
							<h5 class="card-title">You are not logged in</h5>
							<p class="text-muted">Please log in to view your profile, or create an account.</p>
							<div class="d-flex justify-content-center gap-2">
								<a class="btn btn-primary" href="login.html">Login</a>
								<a class="btn btn-outline-primary" href="register.html">Register</a>
							</div>
						</div>
					</div>

					<div id="profileCard" class="card shadow-sm d-none">
						<div class="card-body">
							<h5 class="card-title mb-3">Profile details</h5>

							<div class="row mb-2">
								<div class="col-md-6">
									<label class="form-label small text-muted">Full name</label>
									<div id="fullnameDisplay" class="fw-bold">-</div>
								</div>
								<div class="col-md-6">
									<label class="form-label small text-muted">Username</label>
									<div id="usernameDisplay" class="fw-bold">-</div>
								</div>
							</div>

							<div class="mb-2">
								<label class="form-label small text-muted">Email</label>
								<div id="emailDisplay" class="fw-bold">-</div>
							</div>

							<div class="row mb-2">
								<div class="col-md-4">
									<label class="form-label small text-muted">Age</label>
									<div id="ageDisplay">-</div>
								</div>
								<div class="col-md-4">
									<label class="form-label small text-muted">DOB</label>
									<div id="dobDisplay">-</div>
								</div>
								<div class="col-md-4">
									<label class="form-label small text-muted">Contact</label>
									<div id="contactDisplay">-</div>
								</div>
							</div>

							<div class="mb-2">
								<label class="form-label small text-muted">Address</label>
								<div id="addressDisplay">-</div>
							</div>

							<div class="d-flex gap-2">
								<a href="index.html" class="btn btn-outline-secondary">Back to home</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>

				<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
				<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
				<script src="js/auth.js"></script>
				<script src="js/app.js"></script>
				<script>
					// Redirect to register page if user isn't logged in
					auth.requireAuth('register.html');
					// After redirect guard, request profile will be performed by js/app.js on load
					// Bind logout button to clear client-side session
					(function(){
					  var btn = document.getElementById('logoutBtn');
					  if(btn){
					    btn.addEventListener('click', function(e){
					      e.preventDefault();
					      if(window.auth && typeof window.auth.logout === 'function'){
					        window.auth.logout('index.html');
					      } else {
					        try{ localStorage.removeItem('isLoggedIn'); localStorage.removeItem('userId'); localStorage.removeItem('user'); }catch(e){}
					        window.location.replace('index.html');
					      }
					    });
					  }
					})();
				</script>
	</body>
</html>
